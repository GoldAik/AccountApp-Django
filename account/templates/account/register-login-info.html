{% extends 'base.html' %}
{% load static %}

{% block title %}
{% endblock title %}

{% block head %}
    <link rel="stylesheet" href="{% static 'css/login.css' %}">
    <link rel="stylesheet" href="{% static 'css/register.css' %}">
{% endblock head %}

{% block body %}
    <div class="center">
        <p>Register</p>
        <form action="" method="post">
            {% csrf_token %}

            <label for="">{{form.username.label}}</label>
            {{form.username}}
           
            <label for="">{{form.password1.label}}</label>
            {{form.password1}}

            <label for="">{{form.password2.label}}</label>
            {{form.password2}}
            
            <div class="buttons">
                <a class="button" href="{% url 'register-first-step' %}"> < Back</a>
                <button type="submit">Email verification ></button>
            </div>
        
            <div class="have-account">Have an account? <a href="{% url 'login' %}"> Login in </a> </div>

            {{form.errors.username}}
            {{form.errors.password2}}
        </form>
    </div>


    <script>
        const username_input = document.getElementById('id_username')
        const password1_input = document.getElementById('id_password1')
        const password2_input = document.getElementById('id_password2')

        username_input.addEventListener('input', () => {
            username_input.classList.remove('invalid')
        }, false)

        password2_input.addEventListener('input', () => {
            password2_input.classList.remove('invalid')
        }, false)

        password1_input.addEventListener('input', () => {
            password1_input.classList.remove('invalid')
        }, false)


        const invalidData = (id_elem) =>{
            elem = document.getElementById(id_elem)
            elem.classList.add('invalid')
        }
    </script>

    {% if form.errors.username %}
        <script>
            invalidData('id_username')
        </script>
    {% endif %}

    {% if form.errors.password2 %}
        <script>
            invalidData('id_password1')
            invalidData('id_password2')
        </script>
    {% endif %}

{% endblock body %}