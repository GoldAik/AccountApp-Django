{% extends 'base.html' %}
{% load static %}

{% block title %}
{% endblock title %}

{% block head %}
    <link rel="stylesheet" href="{% static 'css/login.css' %}">
{% endblock head %}

{% block body %}
    
    <div class="center">
        <p>Login Form</p>
        <form action="" method="post">
            {% csrf_token %}

            <label for="login">{{form.login.label}}</label>
            {{form.login}}

            <label for="password">{{form.password.label}}</label>
            {{form.password}}

            <button type="submit">Login in</button>

            <div class="do-not-have-account">You do not have an account? <a href="{% url 'register' %}"> Sign up </a> </div>

        </form>
    </div>

    <script>
        const login_input = document.getElementById('id_login')
        const password_input = document.getElementById('password_input')

        login_input.addEventListener('input', () => {
            login_input.classList.remove('invalid');
        }, false)

        password_input.addEventListener('input', () => {
            password_input.classList.remove('invalid');
        }, false)

        const invalidLogin = () =>{
            login_input.classList.add('invalid')
        }
    
        const invalidData = () =>{
            login_input.classList.add('invalid')
            password_input.classList.add('invalid')
        }
    </script>

    {% if form.errors.login %}
        <script>
            invalidLogin()
        </script>
    {% endif %}

    {% if form.errors.password %}
        <script>
            invalidData()
        </script>
    {% endif %}

{% endblock body %}